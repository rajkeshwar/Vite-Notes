# 5. Exception Handling

## 5.1 Introduction to Exception Handling

- An **exception** is an event that occurs during the execution of a program that disrupts normal program flow.
- Most of the times problems occur in the program for the following reasons:
  - using invalid CLAs  
  - using invalid user inputs  
  - invalid logic in the program  
  - programmatic error  
  - running out of resources  
  - resource might not be available  
  - problems at network, database, or file system  

**Some common problems are:**
- Creating an array with negative size  
- Accessing array elements with an invalid index  
- Integer division exception  
- Accessing members using a null reference  
- Accessing a field with wrong type  
- Stack overflow exception  
- Out of memory  

### Case 1 — Insufficient CLAs

**Command:**

```bash
java Lab627
````

**Output:**

```text
Main Started
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
        at Lab627.main(Lab627.java:6)
```

### Case 2 — String CLA

**Command:**

```bash
java Lab627 JLC
```

**Output:**

```text
Main Started
Exception in thread "main" java.lang.NumberFormatException: For input string: "JLC"
        at java.lang.Integer.parseInt(Integer.java:492)
        at java.lang.Integer.parseInt(Integer.java:527)
        at Lab627.main(Lab627.java:7)
```

### Case 3 — Zero integer input

**Command:**

```bash
java Lab627 0
```

**Output:**

```text
Main Started
Exception in thread "main" java.lang.ArithmeticException: / by zero
        at Lab627.main(Lab627.java:8)
```

### Case 4 — Valid integer input

**Command:**

```bash
java Lab627 10
```

**Output:**

```text
Main Started
Value is: 1
Main Completed
```

There are two types of problems which occur while running the program:

1. **Error**
2. **Exception**

An **error** is caused by environmental conditions.
It’s a serious problem — the application should terminate when one occurs.

An **exception**, on the other hand, is caused by a specific line of code in the program.

## 5.2.1 Error

* An error indicates a **serious problem** that a reasonable application should not try to catch.
* Errors belong to the `java.lang.Error` class.
* Errors are **unchecked**, meaning they’re not verified at compile time.

**Common errors include:**

* `NoClassDefFoundError`
* `NoSuchMethodError`
* `StackOverflowError`
* `OutOfMemoryError`
* `VirtualMachineError`

---

## 5.2.2 Exception

* An **exception** indicates a condition that a reasonable application might try to catch.
* Exceptions belong to the `java.lang.Exception` class.
* Exceptions are **recoverable problems**.
* They are divided into two types:

  * **Checked Exception**
  * **Unchecked Exception**

---

## 5.3 Handling Exceptions in Programs

::: tip
This section introduces `try` and `catch` exactly as written in the PDF.
:::

We can handle problems in a program using the following keywords:

* `try`
* `catch`
* `finally`
* `throw`
* `throws`

::: info
**Notes**

* The `try` block encloses statements that may cause an exception.
* The `catch` block handles exceptions raised by the `try` block.
* A `try` block must be followed by one or more `catch` or `finally` blocks.
  :::

### Syntax

```java
try {
    // statements
} catch (Exception-type ref) {
    // statements
}
```

### `Lab628.java`

```java
class Lab628 {
    public static void main(String args[]) {
        System.out.println("Main Started");
        try {
            String str = args[0];
            int a = Integer.parseInt(str);
            int x = 10 / a;
            System.out.println("Value is: " + x);
        } catch (Exception e) {
            System.out.println("Provide Correct Input");
        }
        System.out.println("Main Completed");
    }
}
```

### Output Cases

::: code-group

```bash [Case 1: No Input]
java Lab628
Main Started
Provide Correct Input
Main Completed
```

```bash [Case 2: String Input]
java Lab628 JLC
Main Started
Provide Correct Input
Main Completed
```

```bash [Case 3: Zero Input]
java Lab628 0
Main Started
Provide Correct Input
Main Completed
```

```bash [Case 4: Valid Input]
java Lab628 10
Main Started
Value is:1
Main Completed
```

:::

---

## 5.4 Catching Multiple Exception Types

::: info
This section explains multiple `catch` blocks exactly as written in the PDF.
:::

* We can define **multiple catch blocks** with one try block.
* Each `catch` handles a different type of exception.
* When an exception occurs, control is transferred to the **first matching catch block**.
* If none match, the program terminates abnormally.

### `Lab629.java`

```java
class Lab629 {
    public static void main(String args[]) {
        System.out.println("Main Started");
        try {
            String str = args[0];
            int a = Integer.parseInt(str);
            int x = 10 / a;
            System.out.println("Value is: " + x);
        } catch (ArrayIndexOutOfBoundsException e) {
            System.out.println("Provide input");
        } catch (NumberFormatException e) {
            System.out.println("Provide Number as input");
        } catch (ArithmeticException e) {
            System.out.println("Provide Non Zero integer as input");
        }
        System.out.println("Main Completed");
    }
}
```

### Output

::: code-group

```bash [Case 1: No Input]
java Lab629
Main Started
Provide input
Main Completed
```

```bash [Case 2: String Input]
java Lab629 JLC
Main Started
Provide Number as input
Main Completed
```

```bash [Case 3: Zero Input]
java Lab629 0
Main Started
Provide Non Zero integer as input
Main Completed
```

```bash [Case 4: Valid Input]
java Lab629 10
Main Started
Value is:1
Main Completed
```

* A `try` block can be followed by multiple `catch` blocks.
* Every `catch` block must be **reachable**.
* If a **parent exception** catch block appears before a **child exception** catch block,
  the child block becomes unreachable.
* If a catch block is unreachable, the compiler reports an error.

### `Lab630.java`

```java
class Lab630 {
    public static void main(String args[]) {
        System.out.println("Main Started");
        try {
            String str = args[0];
            int a = Integer.parseInt(str);
            int x = 10 / a;
            System.out.println("Value is: " + x);
        } catch (Exception e) {
            System.out.println("Exception");
        } catch (ArithmeticException e) {
            System.out.println("ArithmeticException");
        } catch (NumberFormatException e) {
            System.out.println("NumberFormatException");
        } catch (ArrayIndexOutOfBoundsException e) {
            System.out.println("ArrayIndexOutOfBoundsException");
        }
        System.out.println("Main Completed");
    }
}
```

### Compiler Error

```text
Lab630.java:14: error: exception ArithmeticException has already been caught
}catch(ArithmeticException e){
       ^
Lab630.java:17: error: exception NumberFormatException has already been caught
}catch(NumberFormatException e){
       ^
Lab630.java:20: error: exception ArrayIndexOutOfBoundsException has already been caught
}catch(ArrayIndexOutOfBoundsException e){
       ^
3 errors
```

::: danger
The parent `Exception` catch block appears **before** the child exception catch blocks,
making the child blocks unreachable.
:::

---

### `Lab631.java`

```java
class Lab631 {
    public static void main(String args[]) {
        System.out.println("Main Started");
        try {
            String str = args[0];
            int a = Integer.parseInt(str);
            int x = 10 / a;
            System.out.println("Value is: " + x);
        } catch (ArithmeticException e) {
            System.out.println("ArithmeticException");
        } catch (NumberFormatException e) {
            System.out.println("NumberFormatException");
        } catch (ArrayIndexOutOfBoundsException e) {
            System.out.println("ArrayIndexOutOfBoundsException");
        } catch (Exception e) {
            System.out.println("Exception");
        }
        System.out.println("Main Completed");
    }
}
```

### Output

::: code-group

```bash [Case 1: No Input]
java Lab631
Main Started
ArrayIndexOutOfBoundsException
Main Completed
```

```bash [Case 2: String Input]
java Lab631 JLC
Main Started
NumberFormatException
Main Completed
```

```bash [Case 3: Zero Input]
java Lab631 0
Main Started
ArithmeticException
Main Completed
```

```bash [Case 4: Valid Input]
java Lab631 10
Main Started
Value is:1
Main Completed
```
